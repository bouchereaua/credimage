/*! credimage - v1.0.0 - 2015-07-07
* Copyright (c) 2015 Aymeric Bouchereau; Licensed CC BY-SA 4.0 */
!function(a){var b="&copy;",c=0,d=[];a.fn.credimage=function(e){function f(a){var b="",c=a.data("ci-author"),d=a.data("ci-link"),e=a.data("ci-license");return void 0!==c||void 0!==d||void 0!==e?(b=void 0!==c&&void 0!==d?"by <a target='_blank' href='"+d+"'>"+c+"</a>":void 0!==c&&void 0!==d?"by <a target='_blank' href='"+d+"'>"+c+"</a>":void 0===c?"<a target='_blank' href='"+d+"'>Source</a>":void 0===d?"by "+c:0,void 0!==e&&(b+=" / "+e)):b=0,b}var g=a.extend({margin:15},e);return this.each(function(){var d=a(this),e=f(d);if(0!==e){var h=d.width(),i=d.height(),j=d.offset();d.addClass("ci_img_"+c),d.addClass("ci_img");var k="<div id='ci_b_"+c+"' class='ci-box'>"+b+"<span>"+e+"</span></div>";d.after(k);var l=j.left+h-g.margin-a("#ci_b_"+c).width(),m=j.top+i-g.margin-a("#ci_b_"+c).height();a("#ci_b_"+c).css({top:m+"px",left:l+"px"}),c++}}),a(window).resize(function(){var b=a(".ci-box");b.each(function(){var b=a(this).attr("id").substr(5),c=a(".ci_img_"+b),d=c.offset().left+c.width()-g.margin-a(this).width(),e=c.offset().top+c.height()-g.margin-a(this).height();a(this).css({top:e+"px",left:d+"px"})})}),a(".ci-box").click(function(){var b=a(this);0===b.children("span").css("opacity")?(b.stop().css("opacity",1),a(".ci_img:hover+.ci-box, .ci-box:hover").css("display","block"),b.children("span").stop().addClass("ci-box-hover")):(b.stop().css("opacity",""),a(".ci_img:hover+.ci-box, .ci-box:hover").css("display",""),b.children("span").stop().removeClass("ci-box-hover"))}),a(".ci-box > span").mouseleave(function(){var b=a(this).parent();d.push(setTimeout(function(){b.stop().css("opacity",""),b.stop().css("display",""),a(".ci_img:hover+.ci-box, .ci-box:hover").css("display",""),b.children("span").stop().removeClass("ci-box-hover"),clearTimeout()},2e3))}),a(".ci-box > span").mouseenter(function(){for(var a=0;a<d.length;a++)clearTimeout(d[a]);d=[]}),a(".ci-box").mouseleave(function(){var b=a(this);d.push(setTimeout(function(){b.stop().css("opacity",""),b.stop().css("display",""),a(".ci_img:hover+.ci-box, .ci-box:hover").css("display",""),b.children("span").stop().removeClass("ci-box-hover"),clearTimeout()},2e3))}),a(".ci-box").mouseenter(function(){var a=d.length-1;clearTimeout(a)}),this}}(jQuery);